{% extends "layout.html" %}

{% from "components/iconlink.html" import iconLink %}

{% block styles %}
<style>
	#code .id {
		opacity: 0;
		transition-delay: 1s;
	}

	#code:hover .id {
		opacity: 1;
	}

	#code a:hover {
		color: var(--bs-secondary-color)
	}
</style>
{% endblock %}

{% block content %}


<!--Subject Code-->
<div id="code" class="mb-2">
	<a class="h3 m-0 font-monospace text-decoration-none" data-bs-toggle="modal" data-bs-target="#modalGoTo"
		onclick="openGoTo('subject', '{{subject.code}}')">
		<span class="align-top">s/</span><span
			class="border border-2 border-secondary bg-body-tertiary rounded p-1 my-0 mx-1">{{subject.code}}</span></a>
	<span class="id align-bottom text-muted">(#{{subject.id}})</span>
</div>

<div class="row mb-1">
	<!--Subject Header-->
	<div class="col-12 col-lg-7 col-xxl-8 mb-4">
		<h1 class="mt-2 text-body-emphasis">&#{{subject.getEmoji()}} {{subject.name}}</h1>

		<h5 title="Faculty">{{iconLink(faculty.url, faculty.name, "bank")}}</h5>

		{% if subject.old %}
		<div class="p-2 pe-0 pe-md-2 mt-4">
			<div class="alert alert-warning m-0">
				<span class="h5 m-0 pe-2">
					<i class="bi-exclamation-triangle-fill"></i>
					Old subject
				</span>
				<br class="d-lg-none">
				<span class="">
					This subject was removed from the Calendar after the {{subject.latestCalendar().schoolyear}} school
					year.
				</span>
			</div>
		</div>
		{% endif %}
	</div>

	<!--Links-->
	<div class="col-12 col-lg-5 col-xxl-4">
		<div class="card bg-body-tertiary">
			<div class="card-body">
				<div class="h5">{{lenCourses}} Courses in this subject</div>

				<div class="container">
					<div>
						{{iconLink(
						url_for("view.courseBrowser", subject=subject.code),
						"View courses in Course Browser"
						)}}
					</div>
					<div>
						<div class="">
							<span class="">View courses in official Uni Calendar</span>
						</div>
					</div>

					<div class="d-flex align-items-bottom">
						<span class="">Version</span>
						<div class="px-2">
							<select class="form-select form-select-sm"
								onchange="$('#cal-btn').attr('href', $(this).val())" title="Calendar version">
								{% for calendar in calendars %}
								<option value="{{subject.calendarURL(calendar)}}">{{calendar.schoolyear}}</option>
								{% endfor %}
							</select>
						</div>
						<a id="cal-btn" class="btn btn-sm btn-primary" href="{{subject.calendarURL(calendar)}}"
							target="_blank" rel="noopener noreferrer">
							GO
							<i class="bi-caret-right-fill"></i>
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

{% endblock %}