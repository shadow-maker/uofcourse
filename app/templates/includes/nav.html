<style>
	@media (max-width: 768px) {
		#navbar .nav-head {
			width: 100%;
		}

		#navbar-mainlinks li {
			font-size: 1.25rem !important;
		}
	}

	@media (min-width: 768px) {
		#navbar-mainlinks li::before {
			content: "â€¢";
			color: var(--bs-secondary-color);
		}
	}
</style>

<div id="navbar" class="container-fluid bg-body-tertiary sticky-top px-md-5 mb-4 border-bottom border-2"
	style="z-index: 1030;">
	<nav class="navbar navbar-expand-md px-md-5">

		<div class="nav-head d-flex justify-content-between">
			<div class="flex-grow-1 d-flex flex-row justify-content-between">
				<div class="d-flex align-items-center me-2">
					<a href="{{url_for('view.home')}}" class="navbar-brand m-0">
						<span>{{SITE_NAME}}</span>
					</a>
					{% if CURRENT_VERSION_BETA %}
					<a href="{{url_for('view.changelog')}}" class="ms-1">
						<small class="badge bg-secondary px-2 py-1">BETA</small>
					</a>
					{% endif %}
				</div>
				<div class="d-flex align-items-end">
					{% if current_user.is_authenticated %}
					<div class="dropdown d-md-none mx-2">
						<a class="btn border px-3 nav-link py-0 {% if request.path == url_for('view.account') %}active{% endif %}"
							href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
							<span class="position-relative">
								<i class="bi-person-circle fs-2"></i>
								{% if current_user.unread_announcements %}
								<div class="position-absolute top-0 start-100 translate-middle pe-2 pt-0">
									<i class="bi-circle-fill text-danger p-0 align-top" style="font-size: 12px;"></i>
								</div>
								{% endif %}
							</span>
						</a>
						<ul class="dropdown-menu dropdown-menu-end shadow">
							<li>
								<h6 class="dropdown-header">
									{{current_user.name}}
									{% if current_user.role >= ROLE_MOD %}
									<small>
										<span
											class="badge rounded-pill border border-2 {% if current_user.role == ROLE_MOD %}border-info text-info{% elif current_user.role == ROLE_ADMIN %}border-success text-success{% endif %}">
											{{current_user.role.name.upper()}}
										</span>
									</small>
									{% endif %}
								</h6>
							</li>
							{% if current_user.role >= ROLE_MOD %}
							<li><a href="{{url_for('admin.index')}}" class="dropdown-item">
									<i class="bi-terminal"></i>
									Admin
								</a></li>
							{% endif %}
							<li><a href="{{url_for('view.account')}}"
									class="dropdown-item {% if request.path == url_for('view.account') %}active{% endif %}">
									<i class="bi-person-badge"></i>
									Account
								</a></li>
							<li><a href="{{url_for('view.planner')}}"
									class="dropdown-item {% if request.path == url_for('view.planner') %}active{% endif %}">
									<i class="bi-calendar-range"></i>
									Planner
								</a></li>
							<li><a href="{{url_for('view.announcements')}}"
									class="dropdown-item {% if request.path == url_for('view.announcements') %}active{% elif current_user.unread_announcements %}text-info-emphasis{% endif %}">
									<i
										class="{% if current_user.unread_announcements %}bi-bell-fill{% else %}bi-bell{% endif %}"></i>
									Announcements
								</a></li>
							<li>
								<hr class="dropdown-divider">
							</li>
							<li><a href="{{url_for('view.logout')}}" class="dropdown-item link-primary">
									<i class="bi-escape"></i>
									Log Out
								</a></li>
						</ul>
					</div>
					{% endif %}
				</div>
			</div>

			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#toggleMobileMenu"
				aria-controls="toggleMobileMenu" aria-expanded="false" arial-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
		</div>

		<div class="collapse navbar-collapse d-md-flex justify-content-between" id="toggleMobileMenu">
			<hr class="border-secondary my-2 d-md-none">

			<ul id="navbar-mainlinks" class="navbar-nav text-center">
				<li class="nav-item ms-1 py-2 py-md-0">
					<a href="{{url_for('view.courseBrowser')}}"
						class="nav-link d-inline {% if request.path == url_for('view.courseBrowser') %}active{% endif %}">
						<i class="bi-binoculars-fill"></i>
						Course Browser
					</a>
				</li>
				<li class="nav-item ms-1 py-2 py-md-0">
					<a href="{{url_for('view.api')}}"
						class="nav-link d-inline {% if request.path == url_for('view.api') %}active{% endif %}">
						<i class="bi-braces-asterisk"></i>
						API
					</a>
				</li>
				<li class="nav-item ms-1 py-2 py-md-0">
					<a href="{{url_for('view.about')}}"
						class="nav-link d-inline {% if request.path == url_for('view.about') %}active{% endif %}">
						<i class="bi-info-circle-fill"></i>
						About
					</a>
				</li>
			</ul>

			<div class="d-md-flex align-items-center">
				{% if current_user.is_authenticated %}
				<!--User related nav links-->
				<ul class="navbar-nav">
					<li class="nav-item dropdown d-none d-md-block">
						<a class="nav-link py-0" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
							<span class="position-relative lh-1">
								<i class="bi-person-circle fs-4 lh-1"></i>
								{% if current_user.unread_announcements %}
								<div class="position-absolute top-0 start-100 translate-middle pe-2 pt-0">
									<i class="bi-circle-fill text-danger p-0 align-top" style="font-size: 12px;"></i>
								</div>
								{% endif %}
							</span>
							<span class="lh-md align-top">{{current_user.username}}</span>
							<i class="bi-chevron-down lh-1 align-text-top"></i>
						</a>
						<ul class="dropdown-menu dropdown-menu-end shadow">
							<li>
								<h6 class="dropdown-header">
									{{current_user.name}}
									{% if current_user.role >= ROLE_MOD %}
									<small>
										<span
											class="badge rounded-pill border border-2 {% if current_user.role == ROLE_MOD %}border-info text-info{% elif current_user.role == ROLE_ADMIN %}border-success text-success{% endif %}">
											{{current_user.role.name.upper()}}
										</span>
									</small>
									{% endif %}
								</h6>
							</li>
							{% if current_user.role >= ROLE_MOD %}
							<li><a href="{{url_for('admin.index')}}" class="dropdown-item">
									<i class="bi-terminal"></i>
									Admin
								</a></li>
							{% endif %}
							<li><a href="{{url_for('view.account')}}"
									class="dropdown-item {% if request.path == url_for('view.account') %}active{% endif %}">
									<i class="bi-person-badge"></i>
									Account
								</a></li>
							<li><a href="{{url_for('view.planner')}}"
									class="dropdown-item {% if request.path == url_for('view.planner') %}active{% endif %}">
									<i class="bi-calendar-range"></i>
									Planner
								</a></li>
							<li><a href="{{url_for('view.announcements')}}"
									class="dropdown-item {% if request.path == url_for('view.announcements') %}active{% elif current_user.unread_announcements %}text-info-emphasis{% endif %}">
									<i
										class="{% if current_user.unread_announcements %}bi-bell-fill{% else %}bi-bell{% endif %}"></i>
									Announcements
								</a></li>
							<li>
								<hr class="dropdown-divider">
							</li>
							<li><a href="{{url_for('view.logout')}}" class="dropdown-item link-primary">
									<i class="bi-escape"></i>
									Log Out
								</a></li>
						</ul>
					</li>
				</ul>
				{% else %}
				<!--Auth buttons-->
				<ul class="navbar-nav text-center d-flex flex-row justify-content-between me-md-2">
					<li class="flex-grow-1 py-1 py-md-0 ps-2 pe-2 pe-md-0">
						<a class="btn btn-outline-info d-block" href="{{url_for('view.login')}}">
							Log In
						</a>
					</li>
					<li class="flex-grow-1 py-1 py-md-0 ps-2 pe-2 pe-md-0">
						<a class="btn btn-outline-primary d-block" href="{{url_for('view.signup')}}">
							Sign Up
						</a>
					</li>
				</ul>
				{% endif %}
				<!--Theme controls-->
				<ul class="navbar-nav h-100">
					<!--Desktop-->
					<li class="nav-item dropdown d-none d-md-block ms-1">
						<a class="nav-link py-0" href="#" role="button" data-bs-toggle="dropdown"
							data-bs-auto-close="outside" aria-expanded="false">
							<i class="bi-brightness-high-fill lh-1 fs-4 d-none" data-bs-theme-icon="light"></i>
							<i class="bi-moon-stars-fill lh-1 fs-4 d-none" data-bs-theme-icon="dark"></i>
							<i class="bi-circle-half lh-1 fs-4" data-bs-theme-icon="auto"></i>
							<!-- <i class="bi-chevron-down lh-1 align-text-top"></i> -->
						</a>
						<ul class="dropdown-menu dropdown-menu-end shadow">
							<li><a class="dropdown-item" data-bs-theme-value="light" title="Light theme">
									<i class="bi-brightness-high-fill"></i>
									Light
								</a></li>
							<li><a class="dropdown-item" data-bs-theme-value="dark" title="Dark theme">
									<i class="bi-moon-stars-fill"></i>
									Dark
								</a></li>
							<li><a class="dropdown-item" data-bs-theme-value="auto" title="Sync with system theme">
									<i class="bi-circle-half"></i>
									Auto
								</a></li>
						</ul>
					</li>
					<!--Mobile-->
					<li class="nav-item d-md-none d-flex justify-content-evenly mt-2">
						<button class="btn btn-sm btn-outline-secondary border-0" data-bs-theme-value="light"
							title="Light theme">
							<i class="bi-brightness-high-fill"></i>
							Light
						</button>
						<button class="btn btn-sm btn-outline-secondary border-0" data-bs-theme-value="dark"
							title="Dark theme">
							<i class="bi-moon-stars-fill"></i>
							Dark
						</button>
						<button class="btn btn-sm btn-outline-secondary border-0" data-bs-theme-value="auto"
							title="Sync with system theme">
							<i class="bi-circle-half"></i>
							Auto
						</button>
					</li>
				</ul>
			</div>
		</div>
	</nav>
</div>